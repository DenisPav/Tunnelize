@page "/"
@page "/login"
@using Microsoft.AspNetCore.Authorization
@attribute [AllowAnonymous]

<div class="vertical">
    <div class="row">
        <div class="col">
        </div>
        <div class="col">
            <h2>Tunnelize</h2>

            <LoginForm />
        </div>
        <div class="col">
        </div>
    </div>
</div>

@code {
    [Inject] IHttpContextAccessor HttpContextAccessor { get; set; } = null!;
    [Inject] NavigationManager NavigationManager { get; set; } = null!;
    
    protected override void OnParametersSet()
    {
        if(HttpContextAccessor.HttpContext!.User.Identity!.IsAuthenticated)
            NavigationManager.NavigateTo("/dashboard");
    }
}